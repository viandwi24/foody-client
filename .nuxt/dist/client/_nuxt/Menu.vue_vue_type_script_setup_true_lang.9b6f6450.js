import{_ as H}from"./Button.vue_vue_type_script_setup_true_lang.bb7b3a29.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang.7237635b.js";import{_ as S}from"./TextInput.vue_vue_type_script_setup_true_lang.8a3ad8b6.js";import{_ as E}from"./TextAreaInput.vue_vue_type_script_setup_true_lang.16ade34b.js";import{_ as R}from"./Modal.vue_vue_type_script_setup_true_lang.8ab1acef.js";import{o as C,b as z,p as t,a as Y,a9 as G,ah as L,f as u,ab as v,k as O,l as a,m as r,u as J,x as h,aj as K,y as Q,ac as W}from"./entry.a19389b9.js";import{A as b}from"./index.7959ed07.js";import{_ as X}from"./Table.vue_vue_type_script_setup_true_lang.ee99baea.js";const Z={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1408 1536",width:"1.2em",height:"1.2em"},ee=t("path",{fill:"currentColor",d:"M512 1248V544q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0V544q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0V544q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zM480 256h448l-48-117q-7-9-17-11H546q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5H288q-66 0-113-58.5T128 1336V384H32q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"},null,-1),te=[ee];function se($,d){return C(),z("svg",Z,te)}const ae={name:"fa-trash",render:se},oe={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1536 1536",width:"1.2em",height:"1.2em"},le=t("path",{fill:"currentColor",d:"m363 1408l91-91l-235-235l-91 91v107h128v128h107zm523-928q0-22-22-22q-10 0-17 7l-542 542q-7 7-7 17q0 22 22 22q10 0 17-7l542-542q7-7 7-17zm-54-192l416 416l-832 832H0v-416zm683 96q0 53-37 90l-166 166l-416-416l166-165q36-38 90-38q53 0 91 38l235 234q37 39 37 91z"},null,-1),ne=[le];function ce($,d){return C(),z("svg",oe,ne)}const ie={name:"fa-pencil",render:ce},re={class:"flex justify-end mb-4"},de={class:"flex flex-col space-y-2"},ue={class:"text-xs text-gray-500 truncate"},me=["src"],_e={class:"flex"},pe={class:"flex flex-col space-y-4 mt-2"},fe={class:"flex flex-col space-y-2"},ve=t("label",null,"Name",-1),he={class:"flex flex-col space-y-2"},xe=t("label",null,"Description",-1),ye={class:"flex flex-col space-y-2"},ge=t("label",null,"Price",-1),qe={class:"flex-1 px-4 py-2"},we={class:"flex flex-col space-y-2"},Me=t("label",null,"Image",-1),Ce={class:"flex justify-end space-x-4 mt-4"},ze={class:"mt-2"},$e={class:"flex justify-end space-x-4 mt-4"},Ie=Y({__name:"Menu",setup($){const d=G(),x=W(),m=L(),_=u(null),V=v.Menu.All(),A=u([{key:"image",label:"image"},{key:"menu",label:"Menu"},{key:"price",label:"Price",builder:e=>K(e.price||"")},{key:"action",label:"..."}]),T=()=>{s.value={id:0,name:"",description:"",image:"",price:0},f("add")},D=e=>{console.log("edit",e),s.value={id:e.id,name:e.name,description:e.description,image:e.image,price:e.price},f("edit")},U=e=>{console.log("delete",e),s.value={id:e.id,name:e.name,description:e.description,image:e.image,price:e.price},q()},B=async()=>{var e,l,n,c;d.show();try{p.value==="add"?(await x.create(v.Menu.Create(s.value))).status===201&&(m.success("Menu created successfully"),(e=_.value)==null||e.fetch()):p.value==="edit"&&(await x.create(v.Menu.Update(s.value.id,s.value))).status===200&&(m.success(`Menu ${s.value.name} updated successfully`),(l=_.value)==null||l.fetch())}catch(i){if(i instanceof b){const w=((c=(n=i.response)==null?void 0:n.data)==null?void 0:c.message)||"Unknown error";m.error(`cant save data : ${w}`)}}await new Promise(i=>setTimeout(i,1e3)),f(),d.hide()},I=async()=>{var e,l,n;d.show();try{(await x.create(v.Menu.Delete(s.value.id))).status===200&&(m.success(`Menu ${s.value.name} deleted`),(e=_.value)==null||e.fetch())}catch(c){if(c instanceof b){const i=((n=(l=c.response)==null?void 0:l.data)==null?void 0:n.message)||"Unknown error";m.error(`cant save data : ${i}`)}}await new Promise(c=>setTimeout(c,1e3)),q(),d.hide()},p=u("add"),y=u(!1),s=u({id:0,name:"",description:"",image:"",price:0}),f=(e="add")=>{y.value=!y.value,p.value=e},g=u(!1),q=()=>{g.value=!g.value};return O(()=>{}),(e,l)=>{const n=H,c=ie,i=ae,w=N,M=S,P=E,k=R,j=Q;return C(),z("div",null,[t("div",re,[a(n,{class:"capitalize",size:"sm",type:"primary",text:"New Product",onClick:T})]),a(w,{class:"mb-4"},{default:r(()=>[a(X,{ref_key:"table",ref:_,columns:A.value,api:J(V)},{"row-col-menu":r(({rawItem:o})=>[t("div",de,[t("div",null,h(o.name),1),t("div",ue,h(o.description),1)])]),"row-col-image":r(({rawItem:o})=>[t("img",{src:o.image,class:"w-20 h-20"},null,8,me)]),"row-col-action":r(({rawItem:o})=>[t("div",_e,[a(n,{class:"mr-2",size:"xs",type:"warning",onClick:F=>D(o)},{default:r(()=>[a(c,{class:"text-xs"})]),_:2},1032,["onClick"]),a(n,{class:"mr-2",size:"xs",type:"danger",onClick:F=>U(o)},{default:r(()=>[a(i,{class:"text-xs"})]),_:2},1032,["onClick"])])]),_:1},8,["columns","api"])]),_:1}),a(j,null,{default:r(()=>[a(k,{title:`${p.value==="add"?"Add":"Edit"} Menu`,show:y.value},{default:r(()=>[t("div",pe,[t("div",fe,[ve,a(M,{modelValue:s.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.name=o)},null,8,["modelValue"])]),t("div",he,[xe,a(P,{modelValue:s.value.description,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.description=o)},null,8,["modelValue"])]),t("div",ye,[ge,a(M,{modelValue:s.value.price,"onUpdate:modelValue":l[2]||(l[2]=o=>s.value.price=o),type:"number"},{"prefix-disabled":r(()=>[t("span",qe,h(e.$getCurrentCurrency().symbol),1)]),_:1},8,["modelValue"])]),t("div",we,[Me,a(M,{modelValue:s.value.image,"onUpdate:modelValue":l[3]||(l[3]=o=>s.value.image=o)},null,8,["modelValue"])])]),t("div",Ce,[a(n,{class:"capitalize",size:"sm",type:"danger",text:"Cancel",onClick:f}),a(n,{class:"capitalize",size:"sm",type:"primary",text:"Save",onClick:B})])]),_:1},8,["title","show"]),a(k,{title:"Confirm",show:g.value},{default:r(()=>[t("div",ze,[t("p",null,"Are you sure want to delete this menu ("+h(s.value.name)+")?",1)]),t("div",$e,[a(n,{class:"capitalize",size:"sm",type:"opposite",text:"Cancel",onClick:q}),a(n,{class:"capitalize",size:"sm",type:"danger",text:"Delete",onClick:I})])]),_:1},8,["show"])]),_:1})])}}});export{Ie as _};
