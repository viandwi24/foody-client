import{_ as R}from"./Navbar.vue_vue_type_script_setup_true_lang.e787e696.js";import{_ as U}from"./Footer.vue_vue_type_script_setup_true_lang.87a1a78b.js";import{_ as q}from"./Button.vue_vue_type_script_setup_true_lang.4815a5e4.js";import{a as L,ap as V,aa as Y,a9 as A,f as p,k as F,af as H,o as a,b as n,r as _,p as e,$ as h,s as K,ad as b,F as O,q as X,x as r,u as d,l,at as I,ab as D,ac as Q}from"./entry.fd4c3c58.js";import{u as G}from"./useSocket.263359d4.js";import"./Anchor.vue_vue_type_script_setup_true_lang.3d8b7658.js";import"./ThemeSwitcher.vue_vue_type_script_setup_true_lang.dbdae7ff.js";import"./listbox.d0b4cbce.js";import"./open-closed.d177c8e6.js";import"./focus-management.3eebab14.js";import"./calculate-active-index.613dc462.js";import"./use-resolve-button-type.0c4cb0cf.js";import"./use-outside-click.55d6e230.js";import"./hidden.831d2366.js";import"./Header.vue_vue_type_script_setup_true_lang.3a65bba7.js";import"./Body.5cc3e52d.js";import"./index.vue_vue_type_script_setup_true_lang.053779e7.js";import"./Overlay.0d8a2dc1.js";import"./transition.b42055ea.js";import"./Navbar.vue_vue_type_script_setup_true_lang.75ffadd4.js";const J=e("div",{id:"app-before"},null,-1),W={class:"flex flex-col min-h-screen"},Z={class:"flex-1 w-full flex flex-col"},ee={class:"relative flex-1 flex flex-col mx-auto max-w-8xl w-full h-full"},te=e("div",{id:"app-after"},null,-1),se={key:0,class:"fixed top-0 left-0 w-screen h-screen z-50 bg-black/80"},oe={class:"flex-1 relative bg-slate-800 rounded-lg shadow-xl border border-primary-600"},ae={class:"text-2xl font-bold px-6 py-4 flex justify-between"},ne=e("span",null,"Cart",-1),le={class:"px-6 pb-4 flex flex-col space-y-8"},ie={class:"flex flex-col space-y-1"},ce={class:"flex items-center"},re={class:"mr-2 truncate max-w-full"},de={class:"flex space-x-2 text-xs"},ue=["onClick"],me=["onClick"],fe={key:0},pe=e("div",{class:"text-center"},"Cart is empty",-1),_e=[pe],ve={key:0,class:"flex space-x-2 justify-end"},xe={key:1,class:"flex space-x-2 justify-end"},he={key:0,class:"fixed top-0 left-0 flex w-screen h-screen z-50 bg-primary-600"},ye={class:"flex-1 relative flex flex-col justify-center items-center space-y-8"},Ce=e("div",{class:"text-4xl font-bold text-center"}," YOUR CHECKOUT SUCCESS CREATE!!! ",-1),ke={class:"flex-1 flex flex-col justify-between"},ge=e("div",{class:"font-mono font-bold text-xl"},"CHECKOUT TICKET",-1),be={class:"font-semibold"},we={class:"flex flex-col"},$e=e("span",{class:"font-semibold mr-2"},"Name :",-1),Ee={class:"font-mono"},ze=e("span",{class:"font-semibold mr-2"},"Total :",-1),Se={class:"pr-2 flex mr-4 items-center"},Ge=L({__name:"page",setup(je){const z=V("app"),f=Y(),w=A(),S=Q(),{reset:$,increment:j,decrement:T}=f,{socket:B}=G(),i=p(!1),v=()=>{i.value=!i.value},u=p(),y=p(),C=p({x:0,y:0}),x=p(!1),N=async()=>{var t;w.show(),await new Promise(s=>setTimeout(s,2e3));try{const s=await S.create(D.Transaction.Create({user_name:"guest",menus:[...f.menus.map(m=>({id:m.menu.id,qty:m.quantity}))]}));s.status===201&&(u.value=s.data.data,x.value=!0,(t=B.value)==null||t.emit("new:order",{data:s.data.data}),$())}catch{}w.hide()},M=()=>{x.value=!1,v()},E=function(t){if(y.value&&x.value){const{x:s,y:m,width:k,height:c}=y.value.getBoundingClientRect(),o={x:s+k/2,y:m+c/2},g=(t.clientY-o.y)*.008,P=(t.clientX-o.x)*-.008;C.value={x:g,y:P}}};return F(()=>{document.addEventListener("mousemove",E)}),H(()=>{document.removeEventListener("mousemove",E)}),(t,s)=>{const m=R,k=U,c=q;return a(),n("div",null,[_(t.$slots,"app-before"),J,e("div",W,[_(t.$slots,"header",{},()=>[l(m)]),e("div",Z,[e("div",ee,[_(t.$slots,"default")])]),_(t.$slots,"footer",{},()=>[l(k)])]),_(t.$slots,"app-after"),te,e("div",null,[i.value?(a(),n("div",se)):h("",!0),e("div",{class:K(["transition-all duration-300 fixed block w-96 z-50",{"bottom-0 right-0 mb-6 mr-6":!i.value}]),style:b(`${i.value?"top: 50%; left: 50%; transform: translate(-50%, -50%);":""}`)},[e("div",oe,[e("div",ae,[ne,i.value?(a(),n("span",{key:0,class:"transform rotate-45 text-4xl cursor-pointer hover:text-red-500",onClick:v}," + ")):h("",!0)]),e("div",le,[e("div",ie,[(a(!0),n(O,null,X(d(f).menus,o=>(a(),n("div",{key:o.menu.id,class:"flex justify-between"},[e("div",ce,[e("span",re,r(o.menu.name),1),e("span",de,[e("button",{class:"rounded-full w-5 h-5 flex justify-center items-center bg-slate-700",onClick:g=>d(T)(o)}," - ",8,ue),e("div",null,r(o.quantity),1),e("button",{class:"rounded-full w-5 h-5 flex justify-center items-center bg-slate-700",onClick:g=>d(j)(o)}," + ",8,me)])]),e("div",null,r(t.$getCurrentCurrency().symbol+d(f).getPriceMenuItem(o)),1)]))),128)),d(f).menus.length===0?(a(),n("div",fe,_e)):h("",!0)]),i.value?(a(),n("div",xe,[l(c,{size:"sm",type:"danger",text:"Cancel",onClick:v}),l(c,{size:"sm",text:"Checkout Now",onClick:N})])):(a(),n("div",ve,[l(c,{size:"sm",type:"danger",text:"Reset",onClick:d($)},null,8,["onClick"]),l(c,{size:"sm",text:"Checkout",onClick:v})]))])])],6)]),x.value&&u.value?(a(),n("div",he,[e("div",ye,[Ce,e("div",{ref_key:"ticketElm",ref:y,class:"w-120 h-50 rounded-lg shadow bg-white text-slate-800 flex px-6 py-4 relative",style:b({transform:`perspective(1000px) rotateX(${C.value.x}deg) rotateY(${C.value.y}deg)`})},[e("div",ke,[e("div",null,[ge,e("div",be,r(d(z).name),1)]),e("div",we,[e("div",null,[$e,e("span",Ee,r(u.value.user_name),1)]),e("div",null,[ze,e("span",null,r(t.$formatCurrency(u.value.total)),1)])])]),e("div",Se,[l(I,{value:`#${u.value.code}`,size:142,level:"H"},null,8,["value"])]),e("div",{class:"absolute right-0 transform mr-7 font-bold font-mono text-gray-600",style:b({top:"50%",transform:"translate(50%, -50%) rotate(90deg)"})}," #"+r(u.value.code),5)],4),e("div",null,[l(c,{size:"sm",text:"Back to Catalog",onClick:M})])])])):h("",!0)])}}});export{Ge as default};
