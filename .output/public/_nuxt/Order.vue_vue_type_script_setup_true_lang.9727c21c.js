import{_ as H}from"./Title.vue_vue_type_script_setup_true_lang.f339b078.js";import J from"./Content.7a185ab3.js";import{_ as K}from"./DetailModal.vue_vue_type_script_setup_true_lang.dba58fa5.js";import{_ as Q}from"./Button.vue_vue_type_script_setup_true_lang.63c595db.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.a85fb037.js";import{_ as X}from"./Modal.vue_vue_type_script_setup_true_lang.b39e57c8.js";import{o as d,b as m,p as c,a as Z,a9 as I,ag as ee,f as u,ab as g,k as se,l as s,m as l,u as A,$ as te,c as N,S as L,ah as B,y as ne,ac as oe}from"./entry.6b804e22.js";import{_ as ae}from"./list.0d2e9b33.js";import{A as le}from"./index.10db2086.js";import{_ as j}from"./Table.vue_vue_type_script_setup_true_lang.250fd24e.js";const ce={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1216 1312",width:"1.2em",height:"1.2em"},ie=c("path",{fill:"currentColor",d:"M1202 1066q0 40-28 68l-136 136q-28 28-68 28t-68-28L608 976l-294 294q-28 28-68 28t-68-28L42 1134q-28-28-28-68t28-68l294-294L42 410q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294l294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68L880 704l294 294q28 28 28 68z"},null,-1),re=[ie];function de($,y){return d(),m("svg",ce,re)}const _e={name:"fa-times",render:de},ue={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1600 1280",width:"1.2em",height:"1.2em"},me=c("path",{fill:"currentColor",d:"M1575 310q0 40-28 68l-724 724l-136 136q-28 28-68 28t-68-28l-136-136L53 740q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295l656-657q28-28 68-28t68 28l136 136q28 28 28 68z"},null,-1),pe=[me];function fe($,y){return d(),m("svg",ue,pe)}const ve={name:"fa-check",render:fe},he={class:"flex-1 flex"},xe=c("span",{class:"ml-2"},"See Detail",-1),ye=c("span",{class:"ml-2"},"Process",-1),ke=c("span",{class:"ml-2"},"Decline",-1),Ce={class:"flex-1 flex"},ge=c("span",{class:"ml-2"},"See Detail",-1),$e=c("span",{class:"ml-2"},"Finish",-1),be=c("span",{class:"ml-2"},"Cancel",-1),Te={class:"mt-2"},we=L(" Are you sure want to "),ze={key:0},qe={key:1},Me={key:2},Ae={key:3},Ne=L(" this order ? "),Be={class:"flex justify-end space-x-4 mt-4"},Ye=Z({__name:"Order",setup($){const y=I(),b=ee(),P=oe(),T=u(null),S=g.Transaction.All({filter:{status:"pending"}}),D=u([{key:"no",label:"No",data:"$index"},{key:"code",label:"Transaction Code",data:"code"},{key:"name",label:"Name",data:"user_name"},{key:"total",label:"Total",builder:e=>B(e.total||"")},{key:"action",label:"..."}]),w=u(null),F=g.Transaction.All({filter:{status:"processing"}}),O=u([{key:"no",label:"No",data:"$index"},{key:"code",label:"Transaction Code",data:"code"},{key:"name",label:"Name",data:"user_name"},{key:"total",label:"Total",builder:e=>B(e.total||"")},{key:"status",label:"Status",data:"status"},{key:"action",label:"..."}]),a=u(),k=u(!1),n=u("decline"),_=e=>{k.value=!k.value,n.value=e||n.value},z=e=>{console.log("detail",e),a.value=e,n.value="detail"},V=e=>{console.log("process",e),a.value=e,_("process")},E=e=>{console.log("decline",e),a.value=e,_("decline")},R=e=>{console.log("cancel",e),a.value=e,_("cancel")},Y=e=>{console.log("finish",e),a.value=e,_("finish")},q=async()=>{var p,f,v,h;const e=n.value,o=a.value;if(!!o){y.show(),await new Promise(t=>setTimeout(t,1e3));try{if(["process","cancel","decline","finish"].includes(e)){let t="pending",r="";e==="process"?(t="processing",r=`Transaction ${o.code} has been processed`):e==="cancel"?(t="pending",r=`Transaction ${o.code} process has been canceled`):e==="decline"?(t="declined",r=`Transaction ${o.code} has been declined`):e==="finish"&&(t="finished",r=`Transaction ${o.code} has been finished`),(await P.create(g.Transaction.Update(o.id,{status:t}))).status===200&&b.success(r)}}catch(t){if(t instanceof le){const r=((f=(p=t.response)==null?void 0:p.data)==null?void 0:f.message)||"Something went wrong";b.error(r)}}_(n.value),y.hide(),(v=T.value)==null||v.fetch(),(h=w.value)==null||h.fetch()}};return se(()=>{}),(e,o)=>{const p=H,f=J,v=K,h=ae,t=Q,r=ve,C=_e,M=W,U=X,G=ne;return d(),m("div",null,[s(M,{class:"mb-4"},{default:l(()=>[s(f,{class:"pb-2"},{default:l(()=>[s(p,{class:"capitalize",text:"New Order"})]),_:1}),s(j,{ref_key:"table1",ref:T,columns:D.value,api:A(S)},{"row-col-action":l(({rawItem:i})=>[s(v,{show:!!(a.value&&n.value==="detail"&&a.value.id===i.id),transaction:a.value,onClose:o[0]||(o[0]=()=>{a.value=void 0})},null,8,["show","transaction"]),c("div",he,[s(t,{class:"mr-2 flex items-center justify-center",size:"xs",type:"secondary",onClick:x=>z(i)},{default:l(()=>[s(h,{class:"text-xs"}),xe]),_:2},1032,["onClick"]),s(t,{class:"mr-2 flex items-center justify-center",size:"xs",onClick:x=>V(i)},{default:l(()=>[s(r,{class:"text-xs"}),ye]),_:2},1032,["onClick"]),s(t,{class:"mr-2 flex items-center justify-center",size:"xs",type:"danger",onClick:x=>E(i)},{default:l(()=>[s(C,{class:"text-xs"}),ke]),_:2},1032,["onClick"])])]),_:1},8,["columns","api"])]),_:1}),s(M,{class:"mb-4"},{default:l(()=>[s(f,{class:"pb-2"},{default:l(()=>[s(p,{class:"capitalize",text:"Processing Order"})]),_:1}),s(j,{ref_key:"table2",ref:w,columns:O.value,api:A(F)},{"row-col-action":l(({rawItem:i})=>[s(v,{show:!!(a.value&&n.value==="detail"&&a.value.id===i.id),transaction:a.value,onClose:o[1]||(o[1]=()=>{a.value=void 0})},null,8,["show","transaction"]),c("div",Ce,[s(t,{class:"mr-2 flex items-center justify-center",size:"xs",type:"secondary",onClick:x=>z(i)},{default:l(()=>[s(h,{class:"text-xs"}),ge]),_:2},1032,["onClick"]),s(t,{class:"mr-2 flex items-center justify-center",size:"xs",onClick:x=>Y(i)},{default:l(()=>[s(r,{class:"text-xs"}),$e]),_:2},1032,["onClick"]),s(t,{class:"mr-2 flex items-center justify-center",size:"xs",type:"danger",onClick:x=>R(i)},{default:l(()=>[s(C,{class:"text-xs"}),be]),_:2},1032,["onClick"])])]),_:1},8,["columns","api"])]),_:1}),s(G,null,{default:l(()=>[s(U,{title:"Confirm",show:k.value,onClose:o[3]||(o[3]=i=>_(n.value))},{default:l(()=>[c("div",Te,[c("p",null,[we,n.value==="decline"?(d(),m("span",ze,"Decline")):n.value==="cancel"?(d(),m("span",qe,"Cancel Processing")):n.value==="finish"?(d(),m("span",Me,"Finish Processing")):n.value==="process"?(d(),m("span",Ae,"Process")):te("",!0),Ne])]),c("div",Be,[s(t,{class:"capitalize",size:"sm",type:"opposite",text:"Back",onClick:o[2]||(o[2]=i=>_(n.value))}),["decline","cancel"].includes(n.value)?(d(),N(t,{key:0,class:"capitalize",size:"sm",type:"danger",text:n.value,onClick:q},null,8,["text"])):(d(),N(t,{key:1,class:"capitalize",size:"sm",type:"primary",text:n.value,onClick:q},null,8,["text"]))])]),_:1},8,["show"])]),_:1})])}}});export{Ye as _};
